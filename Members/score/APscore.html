<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AP 譜面管理サイト</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="score.css">
</head>

<body>
  <div class="score-container">
    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:20px;">
      <div class="score-title">AP 譜面管理</div>
      <nav class="score-nav">
        <a href="APscore.html">AP</a>
        <a href="ACscore.html">AC</a>
        <a href="Oscore.html">O</a>
      </nav>
    </div>

    <!-- 新規追加フォーム（編集には使用しない） -->
    <div class="score-card">
      <div class="score-title" style="font-size:18px;">新規追加</div>

      <form id="dataForm" onsubmit="return false;">
        <input type="hidden" id="row">

        <div class="score-row"><label>番号</label><input type="text" id="number"></div>
        <div class="score-row"><label>曲名</label><input type="text" id="title"></div>
        <div class="score-row"><label>作曲家</label><input type="text" id="composer"></div>
        <div class="score-row"><label>編集者</label><input type="text" id="editor"></div>
        <div class="score-row"><label>総譜</label><select id="score"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>1st</label><select id="part1"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>2nd</label><select id="part2"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Dola</label><select id="dola"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Cello</label><select id="cello"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Guitar</label><select id="guitar"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Bass</label><select id="bass"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Other</label><input type="text" id="other"></div>

        <button class="score-btn" type="button" onclick="saveData()">追加</button>
        <button class="score-btn" type="button" onclick="resetForm()" style="margin-left:8px; background:#888;">フォームをクリア</button>
      </form>
    </div>

    <!-- 検索 -->
    <div class="score-card" style="margin-bottom:20px;">
      <div class="score-row">
        <label for="searchInput">曲検索</label>
        <input type="text" id="searchInput" placeholder="キーワードを入力">
        <button class="score-btn" onclick="searchTitle()">検索</button>
      </div>
      <div style="margin-top:10px;">
        <button class="score-btn" onclick="loadData()">全件表示</button>
        <button class="score-btn" onclick="loadData('削除')" style="background:#7a7a7a;">削除のみ</button>
        <button class="score-btn" onclick="loadData('その他')" style="background:#7a7a7a;">削除以外</button>
      </div>
    </div>

    <!-- テーブル -->
    <table class="score-table" id="scoreTable">
      <thead>
        <tr>
          <th>番号</th><th>曲名</th><th>作曲家</th><th>編集者</th>
          <th>総譜</th><th>1st</th><th>2nd</th><th>Dola</th>
          <th>Cello</th><th>Guitar</th><th>Bass</th><th>Other</th><th>操作</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- 編集モーダル -->
  <div id="editModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center;">
    <div class="modal-content" style="background:#fff; padding:20px; width:90%; max-width:500px; border-radius:8px;">
      <h3>編集フォーム</h3>
      <form id="editForm" onsubmit="return false;">
        <input type="hidden" id="editRow">

        <div class="score-row"><label>番号</label><input type="text" id="edit_number"></div>
        <div class="score-row"><label>曲名</label><input type="text" id="edit_title"></div>
        <div class="score-row"><label>作曲家</label><input type="text" id="edit_composer"></div>
        <div class="score-row"><label>編集者</label><input type="text" id="edit_editor"></div>
        <div class="score-row"><label>総譜</label><select id="edit_score"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>1st</label><select id="edit_part1"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>2nd</label><select id="edit_part2"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Dola</label><select id="edit_dola"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Cello</label><select id="edit_cello"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Guitar</label><select id="edit_guitar"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Bass</label><select id="edit_bass"><option></option><option>〇</option><option>×</option></select></div>
        <div class="score-row"><label>Other</label><input type="text" id="edit_other"></div>

        <button class="score-btn" type="button" onclick="saveEdit()">保存</button>
        <button class="score-btn" type="button" onclick="closeModal()" style="background:#777; margin-left:8px;">閉じる</button>
      </form>
    </div>
  </div>

  <script src="APscore.js"></script>
</body>
</html>
